version: '2'

compose:
  files:
    - docker-compose.yml

interaction:
  app:
    service: app
    subcommands:
      bash:
        command: /bin/bash
      console:
        command: ./bin/console
      clean:
        command: rm -rf Gemfile.lock

  bundle:
    service: app
    command: bundle

  rspec:
    service: app
    command: bundle exec rspec

  rubocop:
    service: app
    command: bundle exec rubocop

  clean:
    service: app
    command: rm -rf Gemfile.lock

provision:
  - dip app clean
  - dip bundle install
